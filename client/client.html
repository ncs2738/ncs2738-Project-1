
<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<title>Nick's sad prototype 1</title>	
</head>

<body>
<h1>Nick's sad prototype :- (</h1>
<section>
  <h2>Translate the Date</h2>
	<button id="dateButton">Get the date!</button>
</section>
<hr>
<section>
  <h2>Translate a number</h2>
	<input type="text" placeholder = "Enter numbers here!" id = "numInput"> 
	<button id="numButton">Translate!</button>
</section>
<hr>
<h2 id = "title">Response:</h2>
<section id="responseInfo"></section>
<hr>

<script>
  const sendAjax = (url) => 
  {
    const xhr = new XMLHttpRequest();
    xhr.open('GET', url);
    xhr.setRequestHeader ("Accept", "application/json");
    xhr.onload = () => handleResponse(xhr);
    xhr.send();
  };

  const handleResponse = (xhr) => 
  {
    const response = JSON.parse(xhr.response);

    //Clear the info
    responseInfo.innerHTML = "";

    for(entry in response)
    {
      responseInfo.innerHTML = responseInfo.innerHTML + `\n<p>${response[entry]}</p>`;
    }
  }

  window.onload = () =>
  {
    dateButton.onclick = () => 
    {
      sendAjax("/getDate");
      title.innerHTML = "Date:";
    };		
    numButton.onclick = () => 
    {
      sendAjax("/getNumber?number=" + numInput.value);
      title.innerHTML = "Number:";
    };
  }
	</script>

</body>
</html>